ğŸ“ src
  ğŸ“ components
    ğŸ“ BookingForm
      ğŸ“„ index.scss
      ğŸ“„ index.tsx
    ğŸ“ ContactInfoCard
      ğŸ“„ index.scss
      ğŸ“„ index.tsx
  ğŸ“ pages
    ğŸ“ contact
      ğŸ“„ index.config.ts
      ğŸ“„ index.scss
      ğŸ“„ index.tsx
  ğŸ“ services
    ğŸ“ api
      ğŸ“ contact
        ğŸ“„ contactApi.ts
        ğŸ“„ types.ts
  ğŸ“ styles
    ğŸ“„ theme.css

===== File: components\BookingForm\index.scss =====
/* é¢„çº¦è¡¨å•æ ·å¼ */
.booking-form {
  position: relative;
  padding: 0 4px;
  
  /* ===== åŸºç¡€è¡¨å•é¡¹æ ·å¼ ===== */
  .form-item {
    margin-bottom: 20px;
  }
  
  /* è¡¨å•æ ‡ç­¾ */
  .form-item-label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: #1e293b;
    margin-bottom: 8px;
    
    /* å¿…å¡«é¡¹æ ‡è®° */
    &.required::before {
      content: '*';
      color: #ef4444;
      font-size: 16px;
      margin-right: 4px;
    }
  }
  
  /* é”™è¯¯æç¤º */
  .form-error-tip {
    font-size: 12px;
    color: #ef4444;
    margin-top: 4px;
    padding-left: 16px;
    position: relative;
    
    &::before {
      content: "!";
      position: absolute;
      left: 0;
      top: 0;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: bold;
    }
  }
  
  /* ===== è¡¨å•æ§ä»¶é€šç”¨æ ·å¼ ===== */
  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    background: #ffffff;
    border: 1px solid #dce0e4;
    border-radius: 8px;
    font-size: 14px;
    color: #1e293b;
    box-sizing: border-box;
    margin-top: 8px;
    transition: border-color 0.2s ease;
    
    &:focus, 
    &:active {
      border-color: #3b82f6;
      outline: none;
    }
    
    &::placeholder {
      color: #9ca3af;
    }
  }
  
  /* è¾“å…¥æ¡† */
  .form-input {
    display: block;
    height: 44px;
    padding: 0 14px;
  }
  
  /* é€‰æ‹©å™¨ */
  .form-select {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 44px;
    padding: 0 14px;
    position: relative;
    
    .select-placeholder {
      color: #9ca3af;
    }
    
    .select-value {
      color: #1e293b;
    }
    
    /* ç®­å¤´å›¾æ ‡ */
    .select-arrow {
      width: 8px;
      height: 8px;
      border-top: 2px solid #94a3b8;
      border-right: 2px solid #94a3b8;
      transform: rotate(45deg);
      margin-left: 4px;
      flex-shrink: 0;
    }
  }
  
  /* æ–‡æœ¬åŸŸ */
  .form-textarea {
    display: block;
    min-height: 100px;
    padding: 12px 14px;
    resize: none;
  }
  
  /* ===== æäº¤æŒ‰é’® ===== */
  .submit-container {
    margin-top: 24px;
    margin-bottom: 10px;
    width: 100%;
  }
  
  .submit-button {
    display: block;
    width: 100%;
    height: 46px;
    font-size: 16px;
    font-weight: 500;
    color: #ffffff;
    background: #2563EB;
    border-radius: 8px;
    border: none;
    outline: none;
    cursor: pointer;
    transition: opacity 0.2s ease;
    
    &:active {
      opacity: 0.9;
    }
    
    &.loading {
      opacity: 0.8;
    }
  }
}
===== End of File: components\BookingForm\index.scss =====


===== File: components\BookingForm\index.tsx =====
import { useState} from 'react'
import { View, Text, Picker as TaroPicker, Input, Textarea, Button } from '@tarojs/components'
import Taro from '@tarojs/taro'
import { Toast, Picker } from '@nutui/nutui-react-taro'
import './index.scss'

export interface BookingFormData {
  name: string;
  phone: string;
  serviceType: string;
  serviceTypeName: string;
  region: string[];
  address: string;
  remark: string;
}

interface BookingFormProps {
  serviceTypes: { text: string; value: string }[];
  loading: boolean;
  initialValues?: Partial<BookingFormData>;
  onSubmit: (data: BookingFormData) => void;
  onServiceTypeSelect: (type: string) => void;
}

const BookingForm: React.FC<BookingFormProps> = ({ 
  serviceTypes, 
  loading,
  initialValues = {},
  onSubmit, 
  onServiceTypeSelect
}) => {
  // è¡¨å•çŠ¶æ€
  const [formData, setFormData] = useState<Partial<BookingFormData>>(initialValues);
  const [errors, setErrors] = useState<Record<string, string>>({});
  const [showToast, setShowToast] = useState(false);
  const [toastInfo, setToastInfo] = useState({ content: '', icon: 'success' });
  
  // PickerçŠ¶æ€
  const [showServicePicker, setShowServicePicker] = useState(false);
  
  // ç›´æ¥ä½¿ç”¨serviceTypesï¼Œä¸åšæ˜ å°„è½¬æ¢
  const pickerServiceOptions = [serviceTypes];
  
  // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
  const showMessage = (content, icon = 'success') => {
    setToastInfo({ content, icon });
    setShowToast(true);
  };
  
  // æ›´æ–°è¡¨å•å­—æ®µ
  const updateField = (field: string, value: any) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
    
    // æ¸…é™¤é”™è¯¯
    if (errors[field]) {
      setErrors(prev => {
        const newErrors = { ...prev };
        delete newErrors[field];
        return newErrors;
      });
    }
  };
  
  // å¤„ç†æœåŠ¡ç±»å‹ç¡®è®¤
  const handleServiceConfirm = (selectedOptions) => {
    if (selectedOptions && selectedOptions[0]) {
      updateField('serviceType', selectedOptions[0].value);
      updateField('serviceTypeName', selectedOptions[0].text);
      onServiceTypeSelect(selectedOptions[0].value);
      
      // æ·»åŠ éœ‡åŠ¨åé¦ˆ
      Taro.vibrateShort();
    }
  };
  
  // å¤„ç†åœ°åŒºé€‰æ‹©
  const handleRegionChange = (e) => {
    updateField('region', e.detail.value);
  };
  
  // è¡¨å•éªŒè¯
  const validateForm = () => {
    const newErrors: Record<string, string> = {};
    
    // éªŒè¯å§“å
    if (!formData.name || formData.name.trim().length < 2) {
      newErrors.name = 'è¯·è¾“å…¥è”ç³»äººå§“å(è‡³å°‘2ä¸ªå­—ç¬¦)';
    }
    
    // éªŒè¯æ‰‹æœºå·
    if (!formData.phone || !/^1[3-9]\d{9}$/.test(formData.phone)) {
      newErrors.phone = 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·';
    }
    
    // éªŒè¯æœåŠ¡ç±»å‹
    if (!formData.serviceType) {
      newErrors.serviceType = 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹';
    }
    
    // éªŒè¯æ‰€åœ¨åœ°åŒº
    if (!formData.region || !formData.region.length) {
      newErrors.region = 'è¯·é€‰æ‹©æ‰€åœ¨åœ°åŒº';
    }
    
    // éªŒè¯è¯¦ç»†åœ°å€
    if (!formData.address || formData.address.trim().length < 5) {
      newErrors.address = 'è¯·è¾“å…¥è¯¦ç»†åœ°å€(è‡³å°‘5ä¸ªå­—ç¬¦)';
    }
    
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };
  
  // æäº¤è¡¨å•
  const handleSubmit = () => {
    if (validateForm()) {
      // æ·»åŠ éœ‡åŠ¨åé¦ˆ
      Taro.vibrateShort();
      onSubmit(formData as BookingFormData);
    } else {
      // æäº¤å¤±è´¥éœ‡åŠ¨
      Taro.vibrateShort();
      showMessage('è¯·å®Œå–„å¿…å¡«ä¿¡æ¯', 'fail');
    }
  };
  
  // æ ¹æ®è¡¨å•å€¼è·å–æ˜¾ç¤ºæ–‡æœ¬
  const getServiceTypeText = () => {
    if (formData.serviceType) {
      const selectedType = serviceTypes.find(item => item.value === formData.serviceType);
      return selectedType?.text || 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹';
    }
    return 'è¯·é€‰æ‹©æœåŠ¡ç±»å‹';
  };
  
  const getRegionText = () => {
    if (formData.region && formData.region.length > 0) {
      return formData.region.join(' ');
    }
    return 'è¯·é€‰æ‹©æ‰€åœ¨åœ°åŒº';
  };
  
  return (
    <View className="booking-form">
      {/* è”ç³»äººå§“å */}
      <View className="form-item">
        <Text className="form-item-label required">è”ç³»äººå§“å</Text>
        <Input 
          className="form-input"
          placeholder="è¯·è¾“å…¥å§“å"
          value={formData.name}
          onInput={e => updateField('name', e.detail.value)}
        />
        {errors.name && <Text className="form-error-tip">{errors.name}</Text>}
      </View>
      
      {/* è”ç³»ç”µè¯ */}
      <View className="form-item">
        <Text className="form-item-label required">è”ç³»ç”µè¯</Text>
        <Input
          className="form-input"
          placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç "
          type="number"
          value={formData.phone}
          onInput={e => updateField('phone', e.detail.value)}
        />
        {errors.phone && <Text className="form-error-tip">{errors.phone}</Text>}
      </View>
      
      {/* æœåŠ¡ç±»å‹ */}
      <View className="form-item">
        <Text className="form-item-label required">æœåŠ¡ç±»å‹</Text>
        <View 
          className="form-select"
          onClick={() => setShowServicePicker(true)}
        >
          <Text className={formData.serviceType ? 'select-value' : 'select-placeholder'}>
            {getServiceTypeText()}
          </Text>
          <View className="select-arrow" />
        </View>
        {errors.serviceType && <Text className="form-error-tip">{errors.serviceType}</Text>}
      </View>
      
      {/* æ‰€åœ¨åœ°åŒº */}
      <View className="form-item">
        <Text className="form-item-label required">æ‰€åœ¨åœ°åŒº</Text>
        <TaroPicker
          mode="region"
          onChange={handleRegionChange}
        >
          <View className="form-select">
            <Text className={formData.region?.length ? 'select-value' : 'select-placeholder'}>
              {getRegionText()}
            </Text>
            <View className="select-arrow" />
          </View>
        </TaroPicker>
        {errors.region && <Text className="form-error-tip">{errors.region}</Text>}
      </View>
      
      {/* è¯¦ç»†åœ°å€ */}
      <View className="form-item">
        <Text className="form-item-label required">è¯¦ç»†åœ°å€</Text>
        <Input
          className="form-input"
          placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€"
          value={formData.address}
          onInput={e => updateField('address', e.detail.value)}
        />
        {errors.address && <Text className="form-error-tip">{errors.address}</Text>}
      </View>
      
      {/* è¡¥å……è¯´æ˜ */}
      <View className="form-item">
        <Text className="form-item-label">è¡¥å……è¯´æ˜</Text>
        <Textarea
          className="form-textarea"
          placeholder="è¯·è¾“å…¥æ‚¨çš„å…·ä½“éœ€æ±‚æˆ–å…¶ä»–è¯´æ˜ï¼ˆé€‰å¡«ï¼‰"
          maxlength={200}
          value={formData.remark}
          onInput={e => updateField('remark', e.detail.value)}
        />
      </View>
      
      {/* æäº¤æŒ‰é’® */}
      <View className="submit-container">
        <Button
          className={`submit-button ${loading ? 'loading' : ''}`}
          onClick={handleSubmit}
          disabled={loading}
        >
          {loading ? 'æäº¤ä¸­...' : 'ç«‹å³é¢„çº¦'}
        </Button>
      </View>
      
      {/* NutUI Picker æœåŠ¡ç±»å‹é€‰æ‹©å™¨ */}
      <Picker
        title="é€‰æ‹©æœåŠ¡ç±»å‹"
        visible={showServicePicker}
        options={pickerServiceOptions}
        defaultValue={formData.serviceType ? [formData.serviceType] : []}
        onClose={() => setShowServicePicker(false)}
        onConfirm={handleServiceConfirm}
      />
      
      {/* æç¤ºä¿¡æ¯ */}
      <Toast
        visible={showToast}
        content={toastInfo.content}
        icon={toastInfo.icon}
        onClose={() => setShowToast(false)}
      />
    </View>
  );
};

export default BookingForm;
===== End of File: components\BookingForm\index.tsx =====


===== File: components\ContactInfoCard\index.scss =====
.contact-info {
  .company-intro {
    padding: 20px 16px;
    background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
    border-bottom: 1px solid #e0f2fe;
    
    text {
      font-size: 15px;
      line-height: 1.6;
      color: #475569;
      text-align: left;
    }
  }
  
  .actions-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 24px 16px;
    background: #ffffff;
  }
  
  .action-card {
    padding: 16px;
    border-radius: 12px;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    
    &:active {
      transform: translateY(-2px);
    }
    
    .card-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    
    .card-title {
      font-weight: 600;
      font-size: 14px;
    }
    
    &.call-card {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border: 1px solid #93c5fd;
      
      &:active {
        background: linear-gradient(135deg, #bfdbfe 0%, #93c5fd 100%);
      }
      
      .card-title {
        color: #1e40af;
      }
    }
    
    &.wechat-card {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 1px solid #86efac;
      
      &:active {
        background: linear-gradient(135deg, #bbf7d0 0%, #86efac 100%);
      }
      
      .card-title {
        color: #14532d;
      }
    }
  }
  
  .phone-selector {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 20px;
    
    .selector-content {
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      width: 100%;
      max-width: 320px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      
      .selector-header {
        padding: 20px 20px 12px;
        text-align: center;
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
        
        .selector-title {
          font-size: 16px;
          font-weight: 600;
          color: #1e293b;
        }
      }
      
      .phone-options {
        .phone-option {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 18px 20px;
          border-bottom: 1px solid #f1f5f9;
          transition: all 0.2s;
          
          &:last-child {
            border-bottom: none;
          }
          
          &:active {
            background: #f8fafc;
          }
          
          .option-number {
            font-size: 16px;
            font-weight: 600;
            color: #2563eb;
          }
          
          .option-icon {
            color: #64748b;
            font-size: 18px;
          }
        }
      }
      
      .selector-cancel {
        padding: 16px 20px;
        text-align: center;
        background: #f1f5f9;
        border-top: 1px solid #e2e8f0;
        transition: all 0.2s;
        
        &:active {
          background: #e2e8f0;
        }
        
        .cancel-text {
          color: #64748b;
          font-size: 15px;
          font-weight: 500;
        }
      }
    }
  }
}
===== End of File: components\ContactInfoCard\index.scss =====


===== File: components\ContactInfoCard\index.tsx =====
import { useState } from 'react'
import { View, Text } from '@tarojs/components'
import Taro from '@tarojs/taro'
import { Toast } from '@nutui/nutui-react-taro'
import { ContactData } from 'src/services/api/contact/types'
import './index.scss'

interface ContactInfoCardProps {
  data: ContactData;
  onCopyWechat?: () => void;
  onPhoneCall?: (phone: string) => void;
}

const ContactInfoCard: React.FC<ContactInfoCardProps> = ({ 
  data,
  onCopyWechat,
  onPhoneCall
}) => {
  const [showToast, setShowToast] = useState(false);
  const [toastContent, setToastContent] = useState('');
  const [toastIcon, setToastIcon] = useState<'success' | 'fail' | 'loading'>('success');
  const [showPhoneSelector, setShowPhoneSelector] = useState(false);
  
  const showMessage = (content: string, icon: 'success' | 'fail' | 'loading' = 'success') => {
    setToastContent(content);
    setToastIcon(icon);
    setShowToast(true);
  };
  
  const makePhoneCall = (phone: string) => {
    Taro.vibrateShort({ type: 'heavy' });
    setShowPhoneSelector(false);
    
    if (onPhoneCall) {
      onPhoneCall(phone);
    } else {
      Taro.makePhoneCall({
        phoneNumber: phone,
        fail: () => {
          showMessage('æ‹¨æ‰“å¤±è´¥', 'fail');
        }
      });
    }
  };
  
  const copyWechat = () => {
    Taro.vibrateShort({ type: 'heavy' });
    
    if (onCopyWechat) {
      onCopyWechat();
    } else {
      Taro.setClipboardData({
        data: data.wechat,
        success: () => {
          showMessage('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        },
        fail: () => {
          showMessage('å¤åˆ¶å¤±è´¥', 'fail');
        }
      });
    }
  };
  
  const handleQuickCall = () => {
    if (data.phone.length === 1) {
      makePhoneCall(data.phone[0]);
    } else {
      setShowPhoneSelector(true);
    }
  };
  
  const handlePhoneSelectorClose = () => {
    setShowPhoneSelector(false);
  };
  
  return (
    <View className="contact-info">
      <View className="company-intro">
        <Text>{data.description}</Text>
      </View>
      
      <View className="actions-grid">
        <View className="action-card call-card" onClick={handleQuickCall}>
          <Text className="card-icon">ğŸ“</Text>
          <Text className="card-title">ç«‹å³è‡´ç”µ</Text>
        </View>
        
        <View className="action-card wechat-card" onClick={copyWechat}>
          <Text className="card-icon">ğŸ’¬</Text>
          <Text className="card-title">å¾®ä¿¡å’¨è¯¢</Text>
        </View>
      </View>
      
      {showPhoneSelector && (
        <View className="phone-selector" onClick={handlePhoneSelectorClose}>
          <View className="selector-content" onClick={(e) => e.stopPropagation()}>
            <View className="selector-header">
              <Text className="selector-title">é€‰æ‹©å·ç æ‹¨æ‰“</Text>
            </View>
            <View className="phone-options">
              {data.phone.map((phone, index) => (
                <View 
                  key={index}
                  className="phone-option"
                  onClick={() => makePhoneCall(phone)}
                >
                  <Text className="option-number">{phone}</Text>
                  <Text className="option-icon">ğŸ“</Text>
                </View>
              ))}
            </View>
            <View className="selector-cancel" onClick={handlePhoneSelectorClose}>
              <Text className="cancel-text">å–æ¶ˆ</Text>
            </View>
          </View>
        </View>
      )}
      
      <Toast
        visible={showToast}
        content={toastContent}
        icon={toastIcon}
        onClose={() => setShowToast(false)}
        duration={2000}
      />
    </View>
  );
};

export default ContactInfoCard;
===== End of File: components\ContactInfoCard\index.tsx =====


===== File: pages\contact\index.config.ts =====
export default definePageConfig({
    navigationBarTitleText: 'è”ç³»æˆ‘ä»¬'
  })
===== End of File: pages\contact\index.config.ts =====


===== File: pages\contact\index.scss =====
.contact-page {
  min-height: 100vh;
  background: linear-gradient(160deg, #f8fafc 0%, #f1f5f9 100%);
  padding: 16px 12px;
  box-sizing: border-box;
}

.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  
  .loading-text {
    margin-top: 16px;
    font-size: 14px;
    color: #64748b;
  }
}

.contact-container {
  max-width: 600px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.contact-card {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  overflow: hidden;
  margin-bottom: 16px;
  
  &.booking-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
    border: 1px solid rgba(203, 213, 225, 0.5);
  }
  
  &.about-card {
    background: linear-gradient(145deg, #ffffff 0%, #f0f9ff 100%);
    border: 1px solid rgba(186, 230, 253, 0.5);
  }
}

.card-header {
  padding: 16px 16px 14px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.card-title {
  display: block;
  font-size: 18px;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 4px;
}

.card-subtitle {
  display: block;
  font-size: 13px;
  color: #64748b;
}

.card-content {
  padding: 16px;
}

@media screen and (min-width: 768px) {
  .contact-page {
    padding: 24px;
  }
  
  .contact-container {
    max-width: 720px;
    display: grid;
    grid-template-columns: 6fr 5fr;
    gap: 20px;
  }
  
  .contact-card {
    margin-bottom: 0;
    height: fit-content;
  }
  
  .about-card {
    position: sticky;
    top: 24px;
  }
}

@media screen and (max-width: 375px) {
  .contact-page {
    padding: 12px 10px;
  }
  
  .card-header {
    padding: 14px 12px 12px;
  }
  
  .card-content {
    padding: 14px 12px;
  }
}
===== End of File: pages\contact\index.scss =====


===== File: pages\contact\index.tsx =====
import { useState, useEffect } from 'react'
import { View, Text } from '@tarojs/components'
import Taro from '@tarojs/taro'
import { Loading, Toast } from '@nutui/nutui-react-taro'
import BookingForm from '../../components/BookingForm'
import ContactInfoCard from '../../components/ContactInfoCard'
import './index.scss'

import { 
  ServiceType, 
  ContactData, 
  BookingFormData 
} from 'src/services/api/contact/types'
import { 
  getServiceTypes, 
  getContactData, 
  submitBooking
} from 'src/services/api/contact/contactApi'

const handleContactError = (err: any): string => {
  console.error(err);
  return err instanceof Error ? err.message : 'å‘ç”ŸæœªçŸ¥é”™è¯¯';
};

export default function ContactPage() {
  const [loading, setLoading] = useState(true);
  const [submitting, setSubmitting] = useState(false);
  const [showToast, setShowToast] = useState(false);
  const [toastInfo, setToastInfo] = useState({ content: '', icon: 'success' });
  
  const [serviceTypes, setServiceTypes] = useState<ServiceType[]>([]);
  const [contactData, setContactData] = useState<ContactData | null>(null);
  
  const [formData, setFormData] = useState<Partial<BookingFormData>>({
    name: '',
    phone: '',
    serviceType: '',
    serviceTypeName: '',
    region: [],
    address: '',
    remark: ''
  });
  
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        
        const [serviceTypesRes, contactDataRes] = await Promise.all([
          getServiceTypes(),
          getContactData()
        ]);
        
        if (serviceTypesRes.success && serviceTypesRes.data) {
          setServiceTypes(serviceTypesRes.data);
        } else {
          showMessage(serviceTypesRes.error || 'è·å–æœåŠ¡ç±»å‹å¤±è´¥', 'fail');
        }
        
        if (contactDataRes.success && contactDataRes.data) {
          setContactData(contactDataRes.data);
        } else {
          showMessage(contactDataRes.error || 'è·å–è”ç³»ä¿¡æ¯å¤±è´¥', 'fail');
        }
      } catch (error) {
        console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
        showMessage('åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'fail');
      } finally {
        setLoading(false);
      }
    };
    
    fetchData();
  }, []);
  
  const showMessage = (content: string, icon: 'success' | 'fail' | 'loading' = 'success') => {
    setToastInfo({ content, icon });
    setShowToast(true);
  };
  
  const handleFormSubmit = async (data: BookingFormData) => {
    setSubmitting(true);
    
    try {
      const res = await submitBooking(data);
      
      if (res.success) {
        Taro.vibrateShort({ type: 'medium' });
        showMessage('é¢„çº¦æˆåŠŸï¼Œæˆ‘ä»¬å°†å°½å¿«ä¸æ‚¨è”ç³»ï¼');
        
        setFormData({
          name: '',
          phone: '',
          serviceType: '',
          serviceTypeName: '',
          region: [],
          address: '',
          remark: ''
        });
      } else {
        showMessage(res.error || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•', 'fail');
      }
    } catch (error) {
      showMessage(handleContactError(error), 'fail');
    } finally {
      setSubmitting(false);
    }
  };
  
  const handleServiceTypeSelect = (typeValue: string) => {
    const selectedType = serviceTypes.find(type => type.value === typeValue);
    setFormData(prev => ({
      ...prev,
      serviceType: typeValue,
      serviceTypeName: selectedType?.text || ''
    }));
  };
  
  const handlePhoneCall = (phone: string) => {
    Taro.makePhoneCall({
      phoneNumber: phone,
      fail: (err) => {
        if (err.errMsg && !err.errMsg.includes('cancel')) {
          showMessage('æ‹¨æ‰“ç”µè¯å¤±è´¥ï¼Œè¯·é‡è¯•', 'fail');
        }
      }
    });
  };
  
  const handleCopyWechat = () => {
    if (!contactData) return;
    
    Taro.setClipboardData({
      data: contactData.wechat,
      success: () => {
        showMessage('å¾®ä¿¡å·å·²å¤åˆ¶');
      },
      fail: () => {
        showMessage('å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•', 'fail');
      }
    });
  };
  
  if (loading || !contactData) {
    return (
      <View className="loading-container">
        <Loading type="spinner" color="#2563EB" />
        <Text className="loading-text">åŠ è½½ä¸­...</Text>
      </View>
    );
  }
  
  return (
    <View className="contact-page">
      <View className="contact-container">
        <View className="contact-card booking-card">
          <View className="card-header">
            <Text className="card-title">é¢„çº¦æœåŠ¡</Text>
            <Text className="card-subtitle">å¡«å†™ä¿¡æ¯å…è´¹ä¸Šé—¨å‹˜æµ‹</Text>
          </View>
          <View className="card-content">
            <BookingForm 
              serviceTypes={serviceTypes}
              loading={submitting}
              initialValues={formData}
              onSubmit={handleFormSubmit}
              onServiceTypeSelect={handleServiceTypeSelect}
            />
          </View>
        </View>
        
        <View className="contact-card about-card">
          <View className="card-header">
            <Text className="card-title">è”ç³»æˆ‘ä»¬</Text>
            <Text className="card-subtitle">{contactData.address}</Text>
          </View>
          <View className="card-content">
            <ContactInfoCard 
              data={contactData}
              onPhoneCall={handlePhoneCall}
              onCopyWechat={handleCopyWechat}
            />
          </View>
        </View>
      </View>
      
      <Toast
        visible={showToast}
        content={toastInfo.content}
        icon={toastInfo.icon as any}
        onClose={() => setShowToast(false)}
        duration={2000}
      />
    </View>
  );
}
===== End of File: pages\contact\index.tsx =====


===== File: services\api\contact\contactApi.ts =====
import http from '../../http';
import { ServiceType, ContactData, BookingFormData, ApiResponse } from './types';

const ENDPOINTS = {
  GET_SERVICES: '/api/contact/services',
  GET_CONTACT_INFO: '/api/contact/info',
  SUBMIT_BOOKING: '/api/contact/booking',
};

export const getServiceTypes = async (): Promise<ApiResponse<ServiceType[]>> => {
  try {
    const response = await http.get<ServiceType[]>(ENDPOINTS.GET_SERVICES);
    
    return {
      success: true,
      data: response || []
    };
  } catch (error: any) {
    return {
      success: false,
      error: error.message || 'è·å–æœåŠ¡ç±»å‹å¤±è´¥'
    };
  }
};

export const getContactData = async (): Promise<ApiResponse<ContactData>> => {
  try {
    const response = await http.get<ContactData>(ENDPOINTS.GET_CONTACT_INFO);
    
    return {
      success: true,
      data: response
    };
  } catch (error: any) {
    return {
      success: false,
      error: error.message || 'è·å–è”ç³»ä¿¡æ¯å¤±è´¥'
    };
  }
};

export const submitBooking = async (data: BookingFormData): Promise<ApiResponse<{ bookingId: string }>> => {
  try {
    const response = await http.post(ENDPOINTS.SUBMIT_BOOKING, data);
    
    return {
      success: true,
      data: response
    };
  } catch (error: any) {
    return {
      success: false,
      error: error.message || 'æäº¤é¢„çº¦å¤±è´¥'
    };
  }
};
===== End of File: services\api\contact\contactApi.ts =====


===== File: services\api\contact\types.ts =====
export interface ServiceType {
  text: string;
  value: string;
  description: string; 
}

export interface ContactData {
  description: string;  // å…¬å¸ç®€ä»‹
  phone: string[];     // ç”µè¯å·ç æ•°ç»„
  wechat: string;      // å¾®ä¿¡å·
  address: string;     // å…¬å¸åœ°å€
}

export interface BookingFormData {
  name: string;           // å®¢æˆ·å§“å
  phone: string;          // è”ç³»ç”µè¯
  serviceType: string;    // æœåŠ¡ç±»å‹å€¼
  serviceTypeName: string; // æœåŠ¡ç±»å‹åç§°
  region: string[];       // åœ°åŒºæ•°ç»„
  address: string;        // è¯¦ç»†åœ°å€
  remark: string;         // å¤‡æ³¨
}

export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
}
===== End of File: services\api\contact\types.ts =====


===== File: styles\theme.css =====
:root,
page{
  /* ä¸»å“ç‰Œè‰²ç³» - è“è‰²ç³»åˆ—ï¼Œä»æµ…åˆ°æ·± */
  --nutui-brand-1: #EFF6FF; /* æœ€æµ…è“è‰² - é€‚åˆèƒŒæ™¯ã€é«˜äº®åŒºåŸŸ */
  --nutui-brand-2: #DBEAFE; /* æµ…è“è‰² - ç”¨äºè½»é‡å¼ºè°ƒå’ŒèƒŒæ™¯ */
  --nutui-brand-3: #BFDBFE; /* ä¸­æµ…è“è‰² - ç¦ç”¨çŠ¶æ€ */
  --nutui-brand-4: #93C5FD; /* æ¸å˜èµ·å§‹è‰² */
  --nutui-brand-5: #60A5FA; /* ä¸­é—´è¿‡æ¸¡è‰² */
  --nutui-brand-6: #3B82F6; /* ä¸»è‰²è°ƒ - äº®è“è‰² */
  --nutui-brand-7: #2563EB; /* æŒ‰å‹çŠ¶æ€è‰² - ä¸TabBaré€‰ä¸­è‰²ç›¸åŒ */
  --nutui-brand-8: #1D4ED8; /* æ·±è“è‰² - æ¸å˜ç»“æŸè‰² */
  --nutui-brand-9: #1E40AF; /* å¾ˆæ·±è“è‰² */
  --nutui-brand-10: #1E3A8A; /* æœ€æ·±è“è‰² */
  
  /* æ¸å˜è‰²è®¾ç½® */
  --nutui-brand-stop-1: #60A5FA; /* æ¸å˜èµ·å§‹è‰² - å¯¹åº”brand-5 */
  --nutui-brand-stop-2: #2563EB; /* æ¸å˜ç»“æŸè‰² - å¯¹åº”brand-7ï¼Œä¸TabBarä¸€è‡´ */
  
  /* å¼ºè°ƒè‰² - ç”¨äºç‰¹æ®Šå…ƒç´ ï¼Œé˜²æ°´ä¸»é¢˜å¯ä»¥ç”¨è“ç»¿è‰² */
  --nutui-secondary-1: #0EA5E9; /* è“ç»¿è‰²å¼ºè°ƒè‰² - ä¸æ°´ç›¸å…³ */
  
  /* ä¸»è‰²è°ƒæ˜ å°„ */
  --nutui-color-primary: #2563EB; /* ä¸TabBaré€‰ä¸­è‰²ä¿æŒä¸€è‡´ */
  --nutui-color-primary-stop-1: var(--nutui-brand-stop-1);
  --nutui-color-primary-stop-2: var(--nutui-brand-stop-2);
  --nutui-color-primary-pressed: var(--nutui-brand-8);
  --nutui-color-primary-disabled: var(--nutui-brand-3);
  --nutui-color-primary-text: #FFFFFF;
  --nutui-color-primary-light: var(--nutui-brand-2);
  
  /* æ–‡æœ¬ç³»ç»Ÿ */
  --nutui-gray-7: #1F2937; /* ä¸»è¦æ–‡æœ¬ */
  --nutui-gray-6: #4B5563; /* é‡è¦æ¬¡è¦æ–‡æœ¬ */
  --nutui-gray-5: #6B7280; /* æ¬¡è¦æ–‡æœ¬ */
  --nutui-gray-4: #9CA3AF; /* åˆ†å‰²çº¿/ç¦ç”¨æ–‡æœ¬ */
  
  /* èƒŒæ™¯ç³»ç»Ÿ */
  --nutui-gray-1: #FFFFFF; /* ç™½è‰²èƒŒæ™¯ - ä¸navigationBarèƒŒæ™¯ä¸€è‡´ */
  --nutui-gray-2: #F9FAFB; /* æµ…ç°èƒŒæ™¯ - å¡ç‰‡å†…åµŒèƒŒæ™¯ */
  --nutui-gray-3: #F3F4F6; /* ç°è‰²èƒŒæ™¯ - é¡µé¢åŸºåº•è‰² */
  
  /* åŠŸèƒ½è‰²è®¾ç½® - ä¸é˜²æ°´æœåŠ¡ä¸»é¢˜ç›¸åè°ƒ */
  --nutui-color-success: #10B981; /* æˆåŠŸè‰² - ç»¿è‰²ï¼Œä»£è¡¨å®‰å…¨å¯é  */
  --nutui-color-success-disabled: #D1FAE5;
  --nutui-color-danger: #EF4444; /* å±é™©è‰² - çº¢è‰²ï¼Œä»£è¡¨è­¦ç¤º */
  --nutui-color-danger-disabled: #FEE2E2;
  --nutui-color-warning: #F59E0B; /* è­¦å‘Šè‰² - æ©™è‰² */
  --nutui-color-warning-disabled: #FEF3C7;
  --nutui-color-info: #3B82F6; /* ä¿¡æ¯è‰² - è“è‰²ï¼Œä¸æ°´ç›¸å…³ */
  --nutui-color-info-disabled: #BFDBFE;
  --nutui-color-info-background: linear-gradient(315deg, #60A5FA 0%, #2563EB 100%);
  
  /* TabBaré¢œè‰²è®¾ç½® - ä¿æŒä¸€è‡´æ€§ */
  --nutui-tabbar-active-color: #2563EB; /* ä¸TabBaré€‰ä¸­è‰²ä¿æŒä¸€è‡´ */
  --nutui-tabbar-inactive-color: #999999; /* ä¸TabBaræœªé€‰ä¸­è‰²ä¿æŒä¸€è‡´ */

  --nutui-picker-title-ok-font-size: 16px;/*pickeré¢æ¿ç¡®è®¤å­—å·*/
  --nutui-picker-item-height: 40px; /*pickeré¢æ¿æ¯ä¸€æ¡æ•°æ®é«˜åº¦*/
  --nutui-picker-list-height: 180px;
  --nutui-picker-title-cancel-font-size: 16px;
}
===== End of File: styles\theme.css =====

